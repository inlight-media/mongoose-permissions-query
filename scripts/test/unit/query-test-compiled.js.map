{"version":3,"sources":["query-test.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,SAAS,sBAAsB,CAAC,GAAG,EAAE;AAAE,SAAO,GAAG,IAAI,GAAG,CAAC,UAAU,GAAG,GAAG,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC;CAAE;;AAEjG,IAAI,OAAO,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAEhC,IAAI,QAAQ,GAAG,sBAAsB,CAAC,OAAO,CAAC,CAAC;;AAE/C,IAAI,SAAS,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;;AAEpC,IAAI,UAAU,GAAG,sBAAsB,CAAC,SAAS,CAAC,CAAC;;AAEnD,IAAI,2BAA2B,GAAG,OAAO,CAAC,iCAAiC,CAAC,CAAC;;AAE7E,IAAI,4BAA4B,GAAG,sBAAsB,CAAC,2BAA2B,CAAC,CAAC;;AAEvF,IAAI,uBAAuB,GAAG,OAAO,CAAC,+BAA+B,CAAC,CAAC;;AAEvE,IAAI,wBAAwB,GAAG,sBAAsB,CAAC,uBAAuB,CAAC,CAAC;;AAE/E,IAAI,MAAM,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC;AAC1C,IAAI,QAAQ,GAAG,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;;AAErC,QAAQ,CAAC,uCAAuC,EAAE,YAAY;;AAE5D,MAAI,MAAM,GAAG,IAAI,MAAM,CAAC;AACtB,QAAI,EAAE,MAAM;AACZ,UAAM,EAAE,MAAM;AACd,UAAM,EAAE,MAAM;AACd,UAAM,EAAE,QAAQ;AAChB,UAAM,EAAE,KAAK;AACb,UAAM,EAAE,MAAM;AACd,cAAU,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,aAAa,EAAE;AAClD,gBAAY,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,YAAY,EAAE,CAAC;GACtD,CAAC,CAAC;AACH,QAAM,CAAC,MAAM,CAAC,wBAAwB,CAAC,SAAS,CAAC,CAAC,CAAC;AACnD,MAAI,KAAK,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;AACzD,MAAI,WAAW,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;AACrE,MAAI,UAAU,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;AACnE,MAAI,GAAG,GAAG,IAAI,KAAK,CAAC;AAClB,QAAI,EAAE,MAAM;AACZ,UAAM,EAAE,QAAQ;AAChB,UAAM,EAAE,CAAC;AACT,UAAM,EAAE,IAAI,QAAQ,EAAE;AACtB,UAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACpB,UAAM,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE;AAChB,cAAU,EAAE,IAAI,QAAQ,EAAE;AAC1B,gBAAY,EAAE,CAAC,IAAI,QAAQ,EAAE,EAAE,IAAI,QAAQ,EAAE,CAAC;GAC/C,CAAC,CAAC;;AAEH,8BAA4B,CAAC,SAAS,CAAC,CAAC,oBAAoB,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;;AAE/E,IAAE,CAAC,8BAA8B,EAAE,UAAU,IAAI,EAAE;AACjD,QAAI,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAI,kBAAkB,GAAG;AACvB,YAAM,EAAE,EAAE;AACV,YAAM,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;KAC1C,CAAC;AACF,QAAI,KAAK,GAAG,IAAI,CAAC;AACjB,QAAI,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,kBAAkB,EAAE,UAAU,GAAG,EAAE;AAC9E,WAAK,GAAG,GAAG,CAAC;KACb,CAAC,CAAC;AACH,YAAQ,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACvC,YAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC;AAC1B,YAAM,EAAE,CAAC;AACT,YAAM,EAAE,CAAC;AACT,YAAM,EAAE,CAAC;KACV,CAAC,CAAC;AACH,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;;AAEH,IAAE,CAAC,iCAAiC,EAAE,UAAU,IAAI,EAAE;AACpD,QAAI,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAI,kBAAkB,GAAG;AACvB,YAAM,EAAE,EAAE;AACV,YAAM,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC;KAC7B,CAAC;AACF,QAAI,KAAK,GAAG,IAAI,CAAC;AACjB,QAAI,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,kBAAkB,EAAE,UAAU,GAAG,EAAE;AAC9E,WAAK,GAAG,GAAG,CAAC;KACb,CAAC,CAAC;AACH,YAAQ,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACvC,YAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC;AAC1B,YAAM,EAAE,CAAC;AACT,YAAM,EAAE,CAAC;KACV,CAAC,CAAC;AACH,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;;AAEH,IAAE,CAAC,iCAAiC,EAAE,UAAU,IAAI,EAAE;AACpD,QAAI,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAI,kBAAkB,GAAG;AACvB,YAAM,EAAE;AACN,aAAK,EAAE;AACL,iBAAO,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;SACzB;OACF;AACD,YAAM,EAAE,CAAC,GAAG,CAAC;KACd,CAAC;AACF,QAAI,KAAK,GAAG,IAAI,CAAC;AACjB,QAAI,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,kBAAkB,EAAE,UAAU,GAAG,EAAE;AAC9E,WAAK,GAAG,GAAG,CAAC;KACb,CAAC,CAAC;AACH,YAAQ,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACvC,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;AAC1C,SAAG,EAAE;AACH,cAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;OACxB;KACF,CAAC,CAAC;AACH,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;;AAEH,IAAE,CAAC,oCAAoC,EAAE,UAAU,IAAI,EAAE;AACvD,QAAI,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAI,kBAAkB,GAAG;AACvB,YAAM,EAAE;AACN,aAAK,EAAE;AACL,iBAAO,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;SACzB;OACF;AACD,YAAM,EAAE,CAAC,GAAG,CAAC;KACd,CAAC;AACF,QAAI,KAAK,GAAG,IAAI,CAAC;AACjB,QAAI,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,kBAAkB,EAAE,UAAU,GAAG,EAAE;AAC9E,WAAK,GAAG,GAAG,CAAC;KACb,CAAC,CAAC;AACH,YAAQ,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACvC,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;AAC1C,SAAG,EAAE;AACH,aAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;OACvB;KACF,CAAC,CAAC;AACH,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;;AAEH,IAAE,CAAC,kCAAkC,EAAE,UAAU,IAAI,EAAE;AACrD,QAAI,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAI,kBAAkB,GAAG;AACvB,YAAM,EAAE;AACN,kBAAU,EAAE;AACV,iBAAO,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;SACzB;OACF;AACD,YAAM,EAAE,CAAC,GAAG,CAAC;KACd,CAAC;AACF,QAAI,KAAK,GAAG,IAAI,CAAC;AACjB,QAAI,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,kBAAkB,EAAE,UAAU,GAAG,EAAE;AAC9E,WAAK,GAAG,GAAG,CAAC;KACb,CAAC,CAAC;AACH,YAAQ,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACvC,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACjD,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,gBAAU,EAAE;AACV,cAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;OACxB;KACF,CAAC,CAAC;AACH,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,iBAAW,EAAE;AACX,cAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;OACxB;KACF,CAAC,CAAC;AACH,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;;AAEH,IAAE,CAAC,qCAAqC,EAAE,UAAU,IAAI,EAAE;AACxD,QAAI,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAI,kBAAkB,GAAG;AACvB,YAAM,EAAE;AACN,kBAAU,EAAE;AACV,iBAAO,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;SACzB;OACF;AACD,YAAM,EAAE,CAAC,GAAG,CAAC;KACd,CAAC;AACF,QAAI,KAAK,GAAG,IAAI,CAAC;AACjB,QAAI,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,kBAAkB,EAAE,UAAU,GAAG,EAAE;AAC9E,WAAK,GAAG,GAAG,CAAC;KACb,CAAC,CAAC;AACH,YAAQ,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACvC,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,gBAAU,EAAE;AACV,aAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;OACvB;KACF,CAAC,CAAC;AACH,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,iBAAW,EAAE;AACX,aAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;OACvB;KACF,CAAC,CAAC;AACH,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;;AAEH,IAAE,CAAC,6CAA6C,EAAE,UAAU,IAAI,EAAE;AAChE,QAAI,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAI,kBAAkB,GAAG;AACvB,YAAM,EAAE;AACN,kBAAU,EAAE;AACV,iBAAO,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;SACzB;AACD,oBAAY,EAAE;AACZ,iBAAO,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC;SACpB;OACF;AACD,YAAM,EAAE,CAAC,GAAG,CAAC;KACd,CAAC;AACF,QAAI,KAAK,GAAG,IAAI,CAAC;AACjB,QAAI,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,kBAAkB,EAAE,UAAU,GAAG,EAAE;AAC9E,WAAK,GAAG,GAAG,CAAC;KACb,CAAC,CAAC;AACH,YAAQ,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACvC,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,gBAAU,EAAE;AACV,cAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;OACxB;KACF,CAAC,CAAC;AACH,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,iBAAW,EAAE;AACX,cAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;OACxB;KACF,CAAC,CAAC;AACH,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;;AAEH,IAAE,CAAC,gDAAgD,EAAE,UAAU,IAAI,EAAE;AACnE,QAAI,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAI,kBAAkB,GAAG;AACvB,YAAM,EAAE;AACN,kBAAU,EAAE;AACV,iBAAO,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;SACzB;OACF;AACD,YAAM,EAAE,CAAC,GAAG,CAAC;KACd,CAAC;AACF,QAAI,KAAK,GAAG,IAAI,CAAC;AACjB,QAAI,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,kBAAkB,EAAE,UAAU,GAAG,EAAE;AAC9E,WAAK,GAAG,GAAG,CAAC;KACb,CAAC,CAAC;AACH,YAAQ,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACvC,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,gBAAU,EAAE;AACV,aAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;OACvB;KACF,CAAC,CAAC;AACH,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,iBAAW,EAAE;AACX,aAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;OACvB;KACF,CAAC,CAAC;AACH,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;;AAEH,IAAE,CAAC,8DAA8D,EAAE,UAAU,IAAI,EAAE;AACjF,QAAI,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAI,kBAAkB,GAAG;AACvB,YAAM,EAAE;AACN,kBAAU,EAAE;AACV,iBAAO,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;SACzB;OACF;AACD,YAAM,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC;KAC/B,CAAC;AACF,QAAI,KAAK,GAAG,IAAI,CAAC;AACjB,QAAI,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,kBAAkB,EAAE,UAAU,GAAG,EAAE;AAC9E,WAAK,GAAG,GAAG,CAAC;KACb,CAAC,CAAC;AACH,YAAQ,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACvC,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,gBAAU,EAAE;AACV,aAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;OACvB;KACF,CAAC,CAAC;AACH,YAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC;AAC1B,YAAM,EAAE,CAAC;AACT,YAAM,EAAE,CAAC;KACV,CAAC,CAAC;AACH,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;;AAEH,IAAE,CAAC,oEAAoE,EAAE,UAAU,IAAI,EAAE;AACvF,QAAI,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAI,kBAAkB,GAAG;AACvB,YAAM,EAAE;AACN,aAAK,EAAE;AACL,iBAAO,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;SAC5B;AACD,kBAAU,EAAE;AACV,iBAAO,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;SACzB;AACD,mBAAW,EAAE;AACX,iBAAO,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;SACzB;OACF;AACD,YAAM,EAAE,CAAC,GAAG,CAAC;KACd,CAAC;AACF,QAAI,KAAK,GAAG,IAAI,CAAC;AACjB,QAAI,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,kBAAkB,EAAE,UAAU,GAAG,EAAE;AAC9E,WAAK,GAAG,GAAG,CAAC;KACb,CAAC,CAAC;AACH,YAAQ,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACvC,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC;AAC7C,SAAG,EAAE;AACH,cAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;OAC3B;KACF,CAAC,CAAC;AACH,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,gBAAU,EAAE;AACV,aAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;OACvB;KACF,CAAC,CAAC;AACH,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,iBAAW,EAAE;AACX,aAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;OACvB;KACF,CAAC,CAAC;AACH,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;;AAEH,IAAE,CAAC,oEAAoE,EAAE,UAAU,IAAI,EAAE;AACvF,QAAI,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAI,kBAAkB,GAAG;AACvB,YAAM,EAAE;AACN,mBAAW,EAAE;AACX,iBAAO,EAAE,CAAC,GAAG,CAAC;SACf;OACF;AACD,YAAM,EAAE,CAAC,GAAG,CAAC;KACd,CAAC;AACF,QAAI,KAAK,GAAG,IAAI,CAAC;AACjB,QAAI,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,kBAAkB,EAAE,UAAU,GAAG,EAAE;AAC9E,WAAK,GAAG,GAAG,CAAC;KACb,CAAC,CAAC;AACH,YAAQ,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACvC,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,iBAAW,EAAE;AACX,aAAK,EAAE,CAAC,GAAG,CAAC;OACb;KACF,CAAC,CAAC;AACH,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,kBAAY,EAAE;AACZ,aAAK,EAAE,CAAC,GAAG,CAAC;OACb;KACF,CAAC,CAAC;AACH,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;;AAEH,IAAE,CAAC,iFAAiF,EAAE,UAAU,IAAI,EAAE;AACpG,QAAI,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAI,kBAAkB,GAAG;AACvB,YAAM,EAAE;AACN,WAAG,EAAE;AACH,iBAAO,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;SACzB;AACD,kBAAU,EAAE;AACV,iBAAO,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;SAC5B;AACD,oBAAY,EAAE;AACZ,iBAAO,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;SAC/B;OACF;AACD,YAAM,EAAE,CAAC,QAAQ,EAAE,SAAS,CAAC;KAC9B,CAAC;AACF,QAAI,KAAK,GAAG,IAAI,CAAC;AACjB,QAAI,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,kBAAkB,EAAE,UAAU,GAAG,EAAE;AAC9E,WAAK,GAAG,GAAG,CAAC;KACb,CAAC,CAAC;AACH,YAAQ,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACvC,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,SAAG,EAAE;AACH,aAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;OACvB;KACF,CAAC,CAAC;AACH,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,gBAAU,EAAE;AACV,aAAK,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;OAC1B;KACF,CAAC,CAAC;AACH,YAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC;AACjD,kBAAY,EAAE;AACZ,cAAM,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;OAC9B;KACF,CAAC,CAAC;AACH,YAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC;AAC1B,YAAM,EAAE,CAAC;AACT,YAAM,EAAE,CAAC;KACV,CAAC,CAAC;AACH,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;;AAEH,IAAE,CAAC,mCAAmC,EAAE,UAAU,IAAI,EAAE;AACtD,QAAI,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAI,kBAAkB,GAAG;AACvB,YAAM,EAAE,EAAE;AACV,YAAM,EAAE,CAAC,GAAG,CAAC;KACd,CAAC;AACF,QAAI,KAAK,GAAG,IAAI,CAAC;AACjB,QAAI,QAAQ,GAAG,KAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,kBAAkB,EAAE,UAAU,GAAG,EAAE;AAC9E,WAAK,GAAG,GAAG,CAAC;KACb,CAAC,CAAC;AACH,YAAQ,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACvC,YAAQ,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;AACpC,YAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;AACxC,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;;;;AAIH,IAAE,CAAC,iDAAiD,EAAE,UAAU,IAAI,EAAE;AACpE,QAAI,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAI,iBAAiB,GAAG,EAAE,CAAC;AAC3B,QAAI,GAAG,GAAG,IAAI,CAAC;AACf,SAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,iBAAiB,EAAE,UAAU,KAAK,EAAE;AAChE,SAAG,GAAG,KAAK,CAAC;KACb,CAAC,CAAC;AACH,OAAG,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,4BAA4B,CAAC,CAAC;AACvD,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;;AAEH,IAAE,CAAC,oEAAoE,EAAE,UAAU,IAAI,EAAE;AACvF,QAAI,KAAK,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;AAC5B,QAAI,kBAAkB,GAAG;AACvB,YAAM,EAAE;AACN,aAAK,EAAE;AACL,iBAAO,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AAClB,iBAAO,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;SACnB;OACF;AACD,YAAM,EAAE,CAAC,GAAG,CAAC;KACd,CAAC;AACF,QAAI,KAAK,GAAG,IAAI,CAAC;AACjB,SAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,kBAAkB,EAAE,UAAU,GAAG,EAAE;AAC/D,WAAK,GAAG,GAAG,CAAC;KACb,CAAC,CAAC;AACH,SAAK,CAAC,MAAM,CAAC,MAAM,CAAC;AACpB,QAAI,EAAE,CAAC;GACR,CAAC,CAAC;;;AAGH,IAAE,CAAC,yBAAyB,CAAC,CAAC;AAC9B,IAAE,CAAC,4BAA4B,CAAC,CAAC;AACjC,IAAE,CAAC,4BAA4B,CAAC,CAAC;AACjC,IAAE,CAAC,2DAA2D,CAAC,CAAC;CACjE,CAAC,CAAC","file":"query-test-compiled.js","sourcesContent":["'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _should = require('should');\n\nvar _should2 = _interopRequireDefault(_should);\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _sharedPermissionsQueryTest = require('../shared/permissionsQuery-test');\n\nvar _sharedPermissionsQueryTest2 = _interopRequireDefault(_sharedPermissionsQueryTest);\n\nvar _pluginPermissionsQuery = require('../../plugin/permissionsQuery');\n\nvar _pluginPermissionsQuery2 = _interopRequireDefault(_pluginPermissionsQuery);\n\nvar Schema = _mongoose2['default'].Schema;\nvar ObjectId = Schema.Types.ObjectId;\n\ndescribe('mongoose-permissions-query:unit:query', function () {\n  // mock env\n  var schema = new Schema({\n    name: String,\n    field1: String,\n    field2: Number,\n    field3: ObjectId,\n    field4: Array,\n    field5: Object,\n    population: { type: ObjectId, ref: 'Association' },\n    associations: [{ type: ObjectId, ref: 'Population' }]\n  });\n  schema.plugin(_pluginPermissionsQuery2['default']);\n  var Model = _mongoose2['default'].model('Model', schema);\n  var Association = _mongoose2['default'].model('Association', schema);\n  var Population = _mongoose2['default'].model('Population', schema);\n  var doc = new Model({\n    name: 'name',\n    field1: 'field1',\n    field2: 2,\n    field3: new ObjectId(),\n    field4: [4, 4, 4, 4],\n    field5: { 5: 5 },\n    population: new ObjectId(),\n    associations: [new ObjectId(), new ObjectId()]\n  });\n\n  _sharedPermissionsQueryTest2['default'].permissionsQueryTest({ model: Model });\n\n  it('should exclude banned fields', function (done) {\n    var query = Model.findOne();\n    var permissionsOptions = {\n      filter: {},\n      fields: ['-field1', '-field2', '-field3']\n    };\n    var error = null;\n    var newQuery = Model.permissionsQuery(query, permissionsOptions, function (err) {\n      error = err;\n    });\n    _should2['default'].equal(error, null);\n    newQuery._fields.should.eql({\n      field1: 0,\n      field2: 0,\n      field3: 0\n    });\n    done();\n  });\n\n  it('should include permitted fields', function (done) {\n    var query = Model.findOne();\n    var permissionsOptions = {\n      filter: {},\n      fields: ['field3', 'field5']\n    };\n    var error = null;\n    var newQuery = Model.permissionsQuery(query, permissionsOptions, function (err) {\n      error = err;\n    });\n    _should2['default'].equal(error, null);\n    newQuery._fields.should.eql({\n      field3: 1,\n      field5: 1\n    });\n    done();\n  });\n\n  it('should exclude banned documents', function (done) {\n    var query = Model.findOne();\n    var permissionsOptions = {\n      filter: {\n        model: {\n          exclude: ['1', '2', '3']\n        }\n      },\n      fields: ['*']\n    };\n    var error = null;\n    var newQuery = Model.permissionsQuery(query, permissionsOptions, function (err) {\n      error = err;\n    });\n    _should2['default'].equal(error, null);\n    newQuery._conditions.$and.should.containEql({\n      _id: {\n        '$nin': ['1', '2', '3']\n      }\n    });\n    done();\n  });\n\n  it('should include permitted documents', function (done) {\n    var query = Model.findOne();\n    var permissionsOptions = {\n      filter: {\n        model: {\n          include: ['1', '2', '3']\n        }\n      },\n      fields: ['*']\n    };\n    var error = null;\n    var newQuery = Model.permissionsQuery(query, permissionsOptions, function (err) {\n      error = err;\n    });\n    _should2['default'].equal(error, null);\n    newQuery._conditions.$and.should.containEql({\n      _id: {\n        '$in': ['1', '2', '3']\n      }\n    });\n    done();\n  });\n\n  it('should exclude banned dependency', function (done) {\n    var query = Model.findOne();\n    var permissionsOptions = {\n      filter: {\n        population: {\n          exclude: ['1', '2', '3']\n        }\n      },\n      fields: ['*']\n    };\n    var error = null;\n    var newQuery = Model.permissionsQuery(query, permissionsOptions, function (err) {\n      error = err;\n    });\n    _should2['default'].equal(error, null);\n    newQuery._conditions.$and.length.should.equal(1);\n    newQuery._conditions.$and[0].$or.should.containEql({\n      population: {\n        '$nin': ['1', '2', '3']\n      }\n    });\n    newQuery._conditions.$and[0].$or.should.containEql({\n      populations: {\n        '$nin': ['1', '2', '3']\n      }\n    });\n    done();\n  });\n\n  it('should include permitted dependency', function (done) {\n    var query = Model.findOne();\n    var permissionsOptions = {\n      filter: {\n        population: {\n          include: ['1', '2', '3']\n        }\n      },\n      fields: ['*']\n    };\n    var error = null;\n    var newQuery = Model.permissionsQuery(query, permissionsOptions, function (err) {\n      error = err;\n    });\n    _should2['default'].equal(error, null);\n    newQuery._conditions.$and[0].$or.should.containEql({\n      population: {\n        '$in': ['1', '2', '3']\n      }\n    });\n    newQuery._conditions.$and[0].$or.should.containEql({\n      populations: {\n        '$in': ['1', '2', '3']\n      }\n    });\n    done();\n  });\n\n  it('should exclude multiple banned dependencies', function (done) {\n    var query = Model.findOne();\n    var permissionsOptions = {\n      filter: {\n        population: {\n          exclude: ['1', '2', '3']\n        },\n        associations: {\n          include: ['4', '5']\n        }\n      },\n      fields: ['*']\n    };\n    var error = null;\n    var newQuery = Model.permissionsQuery(query, permissionsOptions, function (err) {\n      error = err;\n    });\n    _should2['default'].equal(error, null);\n    newQuery._conditions.$and[0].$or.should.containEql({\n      population: {\n        '$nin': ['1', '2', '3']\n      }\n    });\n    newQuery._conditions.$and[0].$or.should.containEql({\n      populations: {\n        '$nin': ['1', '2', '3']\n      }\n    });\n    done();\n  });\n\n  it('should include multiple permitted dependencies', function (done) {\n    var query = Model.findOne();\n    var permissionsOptions = {\n      filter: {\n        population: {\n          include: ['1', '2', '3']\n        }\n      },\n      fields: ['*']\n    };\n    var error = null;\n    var newQuery = Model.permissionsQuery(query, permissionsOptions, function (err) {\n      error = err;\n    });\n    _should2['default'].equal(error, null);\n    newQuery._conditions.$and[0].$or.should.containEql({\n      population: {\n        '$in': ['1', '2', '3']\n      }\n    });\n    newQuery._conditions.$and[0].$or.should.containEql({\n      populations: {\n        '$in': ['1', '2', '3']\n      }\n    });\n    done();\n  });\n\n  it('should include permitted documents and exclude banned fields', function (done) {\n    var query = Model.findOne();\n    var permissionsOptions = {\n      filter: {\n        population: {\n          include: ['1', '2', '3']\n        }\n      },\n      fields: ['-field1', '-field2']\n    };\n    var error = null;\n    var newQuery = Model.permissionsQuery(query, permissionsOptions, function (err) {\n      error = err;\n    });\n    _should2['default'].equal(error, null);\n    newQuery._conditions.$and[0].$or.should.containEql({\n      population: {\n        '$in': ['1', '2', '3']\n      }\n    });\n    newQuery._fields.should.eql({\n      field1: 0,\n      field2: 0\n    });\n    done();\n  });\n\n  it('should exclude banned documents and include permitted dependencies', function (done) {\n    var query = Model.findOne();\n    var permissionsOptions = {\n      filter: {\n        model: {\n          exclude: ['10', '20', '30']\n        },\n        population: {\n          include: ['1', '2', '3']\n        },\n        association: {\n          include: ['4', '5', '6']\n        }\n      },\n      fields: ['*']\n    };\n    var error = null;\n    var newQuery = Model.permissionsQuery(query, permissionsOptions, function (err) {\n      error = err;\n    });\n    _should2['default'].equal(error, null);\n    newQuery._conditions.$and[0].should.containEql({\n      _id: {\n        '$nin': ['10', '20', '30']\n      }\n    });\n    newQuery._conditions.$and[1].$or.should.containEql({\n      population: {\n        '$in': ['1', '2', '3']\n      }\n    });\n    newQuery._conditions.$and[2].$or.should.containEql({\n      association: {\n        '$in': ['4', '5', '6']\n      }\n    });\n    done();\n  });\n\n  it('should exclude banned dependencies from an array of population ref', function (done) {\n    var query = Model.findOne();\n    var permissionsOptions = {\n      filter: {\n        association: {\n          include: ['4']\n        }\n      },\n      fields: ['*']\n    };\n    var error = null;\n    var newQuery = Model.permissionsQuery(query, permissionsOptions, function (err) {\n      error = err;\n    });\n    _should2['default'].equal(error, null);\n    newQuery._conditions.$and[0].$or.should.containEql({\n      association: {\n        '$in': ['4']\n      }\n    });\n    newQuery._conditions.$and[0].$or.should.containEql({\n      associations: {\n        '$in': ['4']\n      }\n    });\n    done();\n  });\n\n  it('should include permitted documents, permitted dependencies and permitted fields', function (done) {\n    var query = Model.findOne();\n    var permissionsOptions = {\n      filter: {\n        _id: {\n          include: ['1', '2', '3']\n        },\n        population: {\n          include: ['10', '20', '30']\n        },\n        associations: {\n          exclude: ['100', '200', '300']\n        }\n      },\n      fields: ['field1', '-field2']\n    };\n    var error = null;\n    var newQuery = Model.permissionsQuery(query, permissionsOptions, function (err) {\n      error = err;\n    });\n    _should2['default'].equal(error, null);\n    newQuery._conditions.$and[0].$or.should.containEql({\n      _id: {\n        '$in': ['1', '2', '3']\n      }\n    });\n    newQuery._conditions.$and[1].$or.should.containEql({\n      population: {\n        '$in': ['10', '20', '30']\n      }\n    });\n    newQuery._conditions.$and[2].$or.should.containEql({\n      associations: {\n        '$nin': ['100', '200', '300']\n      }\n    });\n    newQuery._fields.should.eql({\n      field1: 1,\n      field2: 0\n    });\n    done();\n  });\n\n  it('should pass with full permissions', function (done) {\n    var query = Model.findOne();\n    var permissionsOptions = {\n      filter: {},\n      fields: ['*']\n    };\n    var error = null;\n    var newQuery = Model.permissionsQuery(query, permissionsOptions, function (err) {\n      error = err;\n    });\n    _should2['default'].equal(error, null);\n    newQuery._conditions.should.eql({});\n    newQuery._fields.should.eql({ '*': 1 });\n    done();\n  });\n  // _fields:{'*':1}\n\n  // Error handler. not sure if we need these. If permission module works correctly, these errors will never occur.\n  it('should handle error of input missing properties', function (done) {\n    var query = Model.findOne();\n    var permissionOptions = {};\n    var err = null;\n    Model.permissionsQuery(query, permissionOptions, function (error) {\n      err = error;\n    });\n    err.message.should.equal('Invalid permission options');\n    done();\n  });\n\n  it('should handle error of having include and exclude at the same time', function (done) {\n    var query = Model.findOne();\n    var permissionsOptions = {\n      filter: {\n        model: {\n          exclude: [1, 2, 3],\n          include: [4, 5, 6]\n        }\n      },\n      fields: ['*']\n    };\n    var error = null;\n    Model.permissionsQuery(query, permissionsOptions, function (err) {\n      error = err;\n    });\n    error.should.exists;\n    done();\n  });\n\n  // query integration test\n  it('should filter documents');\n  it('should filter dependencies');\n  it('should filter dependencies');\n  it('should not show the hidden fields from the original query');\n});"]}